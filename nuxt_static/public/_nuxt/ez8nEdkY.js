import{k as o,h as c,g as _,aw as B,ax as D,M,N as S,am as R,O as N,az as Q,aA as H,a3 as C,P as L,aD as h,L as q,ag as K,aE as G,aF as J,a8 as U,aG as W,aH as X,aI as Y}from"./BT2yw7PE.js";function Z(n,d){const e=_(null),i=o(()=>n.disable===!0?null:c("span",{ref:e,class:"no-outline",tabindex:-1}));function s(l){const u=d.value;l?.qAvoidFocus!==!0&&(l?.type.indexOf("key")===0?document.activeElement!==u&&u?.contains(document.activeElement)===!0&&u.focus():e.value!==null&&(l===void 0||u?.contains(l.target)===!0)&&e.value.focus())}return{refocusTargetEl:i,refocusTarget:s}}const ee={xs:30,sm:35,md:40,lg:50,xl:60},te={...M,...D,...B,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:n=>n==="tf"||n==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},ne=["update:modelValue"];function ae(n,d){const{props:e,slots:i,emit:s,proxy:l}=S(),{$q:u}=l,v=L(e,u),b=_(null),{refocusTargetEl:V,refocusTarget:k}=Z(e,b),f=Q(e,ee),g=o(()=>e.val!==void 0&&Array.isArray(e.modelValue)),x=o(()=>{const t=h(e.val);return g.value===!0?e.modelValue.findIndex(m=>h(m)===t):-1}),r=o(()=>g.value===!0?x.value!==-1:h(e.modelValue)===h(e.trueValue)),a=o(()=>g.value===!0?x.value===-1:h(e.modelValue)===h(e.falseValue)),p=o(()=>r.value===!1&&a.value===!1),w=o(()=>e.disable===!0?-1:e.tabindex||0),P=o(()=>`q-${n} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(v.value===!0?` q-${n}--dark`:"")+(e.dense===!0?` q-${n}--dense`:"")+(e.leftLabel===!0?" reverse":"")),$=o(()=>{const t=r.value===!0?"truthy":a.value===!0?"falsy":"indet",m=e.color!==void 0&&(e.keepColor===!0||r.value===!0)?` text-${e.color}`:"";return`q-${n}__inner relative-position non-selectable q-${n}__inner--${t}${m}`}),O=o(()=>{const t={type:"checkbox"};return e.name!==void 0&&Object.assign(t,{".checked":r.value,"^checked":r.value===!0?"checked":void 0,name:e.name,value:g.value===!0?e.val:e.trueValue}),t}),A=H(O),j=o(()=>{const t={tabindex:w.value,role:"switch","aria-label":e.label,"aria-checked":p.value===!0?"mixed":r.value===!0?"true":"false"};return e.disable===!0&&(t["aria-disabled"]="true"),t});function I(t){t!==void 0&&(C(t),k(t)),e.disable!==!0&&s("update:modelValue",E(),t)}function E(){if(g.value===!0){if(r.value===!0){const t=e.modelValue.slice();return t.splice(x.value,1),t}return e.modelValue.concat([e.val])}if(r.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(a.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function T(t){(t.keyCode===13||t.keyCode===32)&&C(t)}function F(t){(t.keyCode===13||t.keyCode===32)&&I(t)}const z=d(r,p);return Object.assign(l,{toggle:I}),()=>{const t=z();e.disable!==!0&&A(t,"unshift",` q-${n}__native absolute q-ma-none q-pa-none`);const m=[c("div",{class:$.value,style:f.value,"aria-hidden":"true"},t)];V.value!==null&&m.push(V.value);const y=e.label!==void 0?R(i.default,[e.label]):N(i.default);return y!==void 0&&m.push(c("div",{class:`q-${n}__label q-anchor--skip`},y)),c("div",{ref:b,class:P.value,...j.value,onClick:I,onKeydown:T,onKeyup:F},m)}}const le=q({name:"QToggle",props:{...te,icon:String,iconColor:String},emits:ne,setup(n){function d(e,i){const s=o(()=>(e.value===!0?n.checkedIcon:i.value===!0?n.indeterminateIcon:n.uncheckedIcon)||n.icon),l=o(()=>e.value===!0?n.iconColor:null);return()=>[c("div",{class:"q-toggle__track"}),c("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},s.value!==void 0?[c(K,{name:s.value,color:l.value})]:void 0)]}return ae("toggle",d)}}),ue=q({name:"QPopupProxy",props:{...G,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(n,{slots:d,emit:e,attrs:i}){const{proxy:s}=S(),{$q:l}=s,u=_(!1),v=_(null),b=o(()=>parseInt(n.breakpoint,10)),{canShow:V}=J({showing:u});function k(){return l.screen.width<b.value||l.screen.height<b.value?"dialog":"menu"}const f=_(k()),g=o(()=>f.value==="menu"?{maxHeight:"99vh"}:{});U(()=>k(),a=>{u.value!==!0&&(f.value=a)});function x(a){u.value=!0,e("show",a)}function r(a){u.value=!1,f.value=k(),e("hide",a)}return Object.assign(s,{show(a){V(a)===!0&&v.value.show(a)},hide(a){v.value.hide(a)},toggle(a){v.value.toggle(a)}}),W(s,"currentComponent",()=>({type:f.value,ref:v.value})),()=>{const a={ref:v,...g.value,...i,onShow:x,onHide:r};let p;return f.value==="dialog"?p=X:(p=Y,Object.assign(a,{target:n.target,contextMenu:n.contextMenu,noParentEvent:!0,separateClosePopup:!0})),c(p,a,d.default)}}});export{le as _,ue as a};
