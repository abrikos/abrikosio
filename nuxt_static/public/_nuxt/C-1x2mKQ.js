import{_ as N}from"./u6G9m_Kh.js";import{L,M as K,P as U,h as j,N as M,k as m,Y as A,an as I,ar as O,as as Q,d as H,Q as R,a as h,a8 as W,x as v,y as g,B as o,C as d,z as a,K as b,S as Y,U as F,T as y,A as _,at as G,au as J,av as $,D as C,ak as w,n as X,W as Z,_ as tt}from"./BE-S2lnh.js";import{a as et,_ as nt}from"./DMgRqrJ-.js";import{_ as ot,a as st}from"./CjJ4K2fB.js";import{_ as at}from"./vwiXhnH8.js";import{_ as it}from"./DY8mRsU9.js";const lt={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},q={xs:2,sm:4,md:8,lg:16,xl:24},rt=L({name:"QSeparator",props:{...K,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const n=M(),s=U(t,n.proxy.$q),i=m(()=>t.vertical===!0?"vertical":"horizontal"),l=m(()=>` q-separator--${i.value}`),r=m(()=>t.inset!==!1?`${l.value}-${lt[t.inset]}`:""),e=m(()=>`q-separator${l.value}${r.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(s.value===!0?" q-separator--dark":"")),c=m(()=>{const u={};if(t.size!==void 0&&(u[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const x=t.spaced===!0?`${q.md}px`:t.spaced in q?`${q[t.spaced]}px`:t.spaced,f=t.vertical===!0?["Left","Right"]:["Top","Bottom"];u[`margin${f[0]}`]=u[`margin${f[1]}`]=x}return u});return()=>j("hr",{class:e.value,style:c.value,"aria-orientation":i.value})}});function V(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const n=parseInt(t,10);return isNaN(n)?0:n}const ct=A({name:"close-popup",beforeMount(t,{value:n}){const s={depth:V(n),handler(i){s.depth!==0&&setTimeout(()=>{const l=O(t);l!==void 0&&Q(l,i,s.depth)})},handlerKey(i){I(i,13)===!0&&s.handler(i)}};t.__qclosepopup=s,t.addEventListener("click",s.handler),t.addEventListener("keyup",s.handlerKey)},updated(t,{value:n,oldValue:s}){n!==s&&(t.__qclosepopup.depth=V(n))},beforeUnmount(t){const n=t.__qclosepopup;t.removeEventListener("click",n.handler),t.removeEventListener("keyup",n.handlerKey),delete t.__qclosepopup}}),ut={class:"post-card"},dt={class:"q-pa-sm flex items-center justify-between no-wrap",color:"primary"},mt={class:"text-blue"},pt={class:"text q-pa-sm flex justify-between no-wrap"},_t=["src"],ft=H({__name:"PostCard",props:{post:{}},setup(t){const{loggedUser:n}=R(),{$event:s}=h();W(()=>t.post.published,async r=>h().$PATCH(`/posts/${t.post.id}`,{published:t.post.published}));const i=async r=>{await h().$DELETE(`/posts/${t.post.id}`),s("posts-load")},l=m(()=>n?.is_admin||n?.id===t.post.user_id);return(r,e)=>{const c=F,u=et,x=nt,f=N,B=G,D=rt,E=ot,P=at,S=it,T=st,z=Z,k=ct;return v(),g("div",ut,[o(z,{class:"q-ma-sm bg-grey-4",onClick:e[5]||(e[5]=p=>("navigateTo"in r?r.navigateTo:b(X))(`/posts/${t.post.id}`))},{default:d(()=>[a("div",dt,[b(l)?(v(),Y(c,{key:0,size:"sm",icon:"mdi-pencil",to:`/posts/edit/${t.post.id}`,flat:""},null,8,["to"])):y("",!0),a("div",null,[a("span",mt,_(t.post.title),1),a("div",null,[a("small",null,[a("i",null,_(t.post.date),1)])]),o(u,{modelValue:t.post.rate,"onUpdate:modelValue":e[0]||(e[0]=p=>t.post.rate=p),disable:"",max:"5",icon:"mdi-star-outline",color:"red","icon-selected":"mdi-star","icon-half":"mdi-star-half-full"},null,8,["modelValue"])]),o(x),o(B,null,{default:d(()=>[o(f,{user:t.post.user},null,8,["user"])]),_:1})]),o(D,{inset:""}),a("div",pt,[a("span",null,_(t.post.short),1),a("div",null,[t.post.poster?(v(),g("img",{key:0,src:t.post.poster},null,8,_t)):y("",!0)])]),b(l)?(v(),g("div",{key:0,class:J(["flex justify-between",t.post.published?"":"bg-red-4"])},[o(E,{modelValue:t.post.published,"onUpdate:modelValue":e[1]||(e[1]=p=>t.post.published=p),label:"Show for all"},null,8,["modelValue"]),o(c,{icon:"mdi-delete",flat:"",onClick:e[4]||(e[4]=$(()=>{},["stop"])),color:t.post.published?"red":""},{default:d(()=>[o(P,null,{default:d(()=>[C('Удалить "'+_(t.post.title)+'"',1)]),_:1}),o(T,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[o(S,null,{default:d(()=>[C('Удалить "'+_(t.post.title)+'"?',1),e[6]||(e[6]=a("br",null,null,-1)),w(o(c,{onClick:e[2]||(e[2]=$(p=>i(t.post.id),["stop"])),label:"OK",color:"negative"},null,512),[[k]]),w(o(c,{onClick:e[3]||(e[3]=$(()=>{},["stop"])),label:"Отмена"},null,512),[[k]])]),_:1})]),_:1})]),_:1},8,["color"])],2)):y("",!0)]),_:1})])}}}),$t=Object.assign(tt(ft,[["__scopeId","data-v-0065981c"]]),{__name:"PostCard"});export{$t as _};
