import{_ as N}from"./DYaw7upL.js";import{d as R,R as j,W as z,X as A,Q as M,Y as D,o as E,f as F,x as f,y as O,z as _,B as t,C as a,K as o,Z as Q,D as x,A as G,U as H,S as I,T as K,$ as W,g,a as p,n as y,_ as X}from"./ChYXO2yg.js";import{_ as Y}from"./Cl-rrAb3.js";import{_ as Z,a as J}from"./Drh7pyiV.js";import{_ as L,a as oo}from"./D9U-e0Pv.js";import{_ as eo}from"./P2Nm2x7Q.js";import{_ as to}from"./0UYu07k-.js";import{_ as so}from"./p29FIiek.js";const ao={class:"row q-gutter-md"},no={class:"col-sm q-pa-lg"},lo={class:"row items-center"},ro={class:"col"},_o={class:"col text-right"},mo={class:"col-sm"},io={class:"preview"},po=R({__name:"PostForm",setup(uo){const r=j(),v=z(),{loggedUser:b}=A(M()),e=g({});async function u(){r.params.id&&(e.value=await p().$GET("/posts/"+r.params.id),(!e.value||!e.value.id)&&y("/"))}D(()=>r.params.id,n=>{n||(e.value={})}),E(u);const m=g({});async function V(){if(!b.value)return;let n;r.params.id?n=await p().$PATCH(`/posts/${r.params.id}`,e.value):n=await p().$POST("/posts/",e.value),n.id?(v.notify({message:"Success",color:"green"}),n.id&&y(`/posts/edit/${n.id}`)):n.errors&&(m.value=n.errors)}async function w(){m.value={},await u()}return(n,s)=>{const i=J,d=Q,k=eo,q=L,$=to,S=oo,h=Z,c=H,C=so,T=Y,P=W,U=F("router-link"),B=N;return f(),O("div",ao,[_("div",no,[t(P,null,{default:a(()=>[t(T,{onSubmit:V,onReset:w},{default:a(()=>[t(h,null,{default:a(()=>[t(i,{modelValue:o(e).title,"onUpdate:modelValue":s[0]||(s[0]=l=>o(e).title=l),label:"Title",error:!!o(m).title,"error-message":o(m).title?.join(",")},null,8,["modelValue","error","error-message"]),t(i,{modelValue:o(e).poster,"onUpdate:modelValue":s[1]||(s[1]=l=>o(e).poster=l),label:"Poster image url",hint:"Place link for any image"},{prepend:a(()=>[t(d,{name:"mdi-image"})]),_:1},8,["modelValue"]),t(i,{modelValue:o(e).short,"onUpdate:modelValue":s[2]||(s[2]=l=>o(e).short=l),label:"Short",type:"textarea",filled:"",autogrow:"",error:!!o(m).short,"error-message":o(m).short?.join(",")},null,8,["modelValue","error","error-message"]),t(i,{modelValue:o(e).body,"onUpdate:modelValue":s[3]||(s[3]=l=>o(e).body=l),label:"Body (accepts markdown syntax)",type:"textarea",filled:"",autogrow:""},{append:a(()=>[t(d,{name:"mdi-help"},{default:a(()=>[t(q,null,{default:a(()=>[t(k,null,{default:a(()=>[...s[5]||(s[5]=[_("a",{href:"https://skillbox.ru/media/code/yazyk-razmetki-markdown-shpargalka-po-sintaksisu-s-primerami/",target:"_blank"},"Markdown syntax",-1)])]),_:1})]),_:1})]),_:1}),t($,null,{default:a(()=>[...s[6]||(s[6]=[x("Markdown syntax",-1)])]),_:1})]),_:1},8,["modelValue"]),_("div",lo,[_("div",ro,[t(S,{modelValue:o(e).published,"onUpdate:modelValue":s[4]||(s[4]=l=>o(e).published=l),label:"Show for all"},null,8,["modelValue"])]),_("div",_o,G(o(e).date),1)])]),_:1}),t(C,{class:"flex justify-between"},{default:a(()=>[t(c,{type:"submit",color:"primary",flat:!1,label:o(r).params.id?"Save":"Create"},null,8,["label"]),o(r).params.id?(f(),I(c,{key:0,type:"reset",flat:!1,label:"Reset"})):K("",!0)]),_:1})]),_:1})]),_:1})]),_("div",mo,[t(U,{to:`/posts/${o(r).params.id}`},{default:a(()=>[...s[7]||(s[7]=[x("View Post",-1)])]),_:1},8,["to"]),_("div",io,[t(B,{post:o(e)},null,8,["post"])])])])}}}),wo=Object.assign(X(po,[["__scopeId","data-v-ca10f3da"]]),{__name:"PostForm"});export{wo as _};
