import{_ as N}from"./Dt2wAfJ0.js";import{d as R,R as j,X as z,aq as A,Q as M,o as D,f as E,x as f,y as F,z as _,B as t,C as a,K as o,ag as O,D as x,A as Q,U as G,S as H,T as I,W as K,g,a as p,n as y,_ as W}from"./CmHhmHmu.js";import{_ as X}from"./B3CrpATk.js";import{a as J,_ as L}from"./DNpDKz2V.js";import{a as Y,_ as Z}from"./drOlcEPM.js";import{_ as oo}from"./DqCPpVbD.js";import{_ as eo}from"./DVf6bNHY.js";import{_ as to}from"./Fi3YZRJW.js";const so={class:"row q-gutter-md"},ao={class:"col-sm q-pa-lg"},no={class:"row items-center"},lo={class:"col"},ro={class:"col text-right"},_o={class:"col-sm"},mo={class:"preview"},io=R({__name:"PostForm",setup(po){const r=j(),v=z(),{loggedUser:b}=A(M()),e=g({});async function u(){r.params.id&&(e.value=await p().$GET("/posts/"+r.params.id),(!e.value||!e.value.id)&&y("/"))}D(u);const m=g({});async function V(){if(!b.value)return;let l;r.params.id?l=await p().$PATCH(`/posts/${r.params.id}`,e.value):l=await p().$POST("/posts",e.value),l.id?(v.notify({message:"Success",color:"green"}),l.id&&y(`/post/edit-${l.id}`)):l.errors&&(m.value=l.errors)}async function w(){m.value={},await u()}return(l,s)=>{const i=L,d=O,k=oo,q=Y,$=eo,S=Z,C=J,c=G,T=to,h=X,P=K,U=E("router-link"),B=N;return f(),F("div",so,[_("div",ao,[t(P,null,{default:a(()=>[t(h,{onSubmit:V,onReset:w},{default:a(()=>[t(C,null,{default:a(()=>[t(i,{modelValue:o(e).title,"onUpdate:modelValue":s[0]||(s[0]=n=>o(e).title=n),label:"Title",error:!!o(m).title,"error-message":o(m).title?.join(",")},null,8,["modelValue","error","error-message"]),t(i,{modelValue:o(e).poster,"onUpdate:modelValue":s[1]||(s[1]=n=>o(e).poster=n),label:"Poster image url",hint:"Place link for any image"},{prepend:a(()=>[t(d,{name:"mdi-image"})]),_:1},8,["modelValue"]),t(i,{modelValue:o(e).short,"onUpdate:modelValue":s[2]||(s[2]=n=>o(e).short=n),label:"Short",type:"textarea",filled:"",autogrow:"",error:!!o(m).short,"error-message":o(m).short?.join(",")},null,8,["modelValue","error","error-message"]),t(i,{modelValue:o(e).body,"onUpdate:modelValue":s[3]||(s[3]=n=>o(e).body=n),label:"Body (accepts markdown syntax)",type:"textarea",filled:"",autogrow:""},{append:a(()=>[t(d,{name:"mdi-help"},{default:a(()=>[t(q,null,{default:a(()=>[t(k,null,{default:a(()=>[...s[5]||(s[5]=[_("a",{href:"https://skillbox.ru/media/code/yazyk-razmetki-markdown-shpargalka-po-sintaksisu-s-primerami/",target:"_blank"},"Markdown syntax",-1)])]),_:1})]),_:1})]),_:1}),t($,null,{default:a(()=>[...s[6]||(s[6]=[x("Markdown syntax",-1)])]),_:1})]),_:1},8,["modelValue"]),_("div",no,[_("div",lo,[t(S,{modelValue:o(e).published,"onUpdate:modelValue":s[4]||(s[4]=n=>o(e).published=n),label:"Show for all"},null,8,["modelValue"])]),_("div",ro,Q(o(e).date),1)])]),_:1}),t(T,{class:"flex justify-between"},{default:a(()=>[t(c,{type:"submit",color:"primary",flat:!1,label:o(r).params.id?"Save":"Create"},null,8,["label"]),o(r).params.id?(f(),H(c,{key:0,type:"reset",flat:!1,label:"Reset"})):I("",!0)]),_:1})]),_:1})]),_:1})]),_("div",_o,[t(U,{to:`/post/${o(r).params.id}`},{default:a(()=>[...s[7]||(s[7]=[x("View Post",-1)])]),_:1},8,["to"]),_("div",mo,[t(B,{post:o(e)},null,8,["post"])])])])}}}),Vo=Object.assign(W(io,[["__scopeId","data-v-c4eda33d"]]),{__name:"PostForm"});export{Vo as _};
