import{_ as N}from"./Cn7sJmxH.js";import{L,M as K,P as U,h as j,N as M,k as m,a0 as A,ao as I,ar as O,as as Q,d as H,Q as R,a as h,Y,x as v,y as g,B as n,C as d,z as a,K as b,S as F,U as G,T as $,A as _,at as J,au as W,av as y,D as C,al as w,n as X,$ as Z,_ as tt}from"./D6X2TgHu.js";import{a as et,_ as ot}from"./DkcTFx9s.js";import{a as nt,_ as st}from"./DN3hoMpx.js";import{_ as at}from"./CYRgq6QX.js";import{_ as lt}from"./ESxIH8Ya.js";const it={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},q={xs:2,sm:4,md:8,lg:16,xl:24},rt=L({name:"QSeparator",props:{...K,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const o=M(),s=U(t,o.proxy.$q),l=m(()=>t.vertical===!0?"vertical":"horizontal"),i=m(()=>` q-separator--${l.value}`),r=m(()=>t.inset!==!1?`${i.value}-${it[t.inset]}`:""),e=m(()=>`q-separator${i.value}${r.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(s.value===!0?" q-separator--dark":"")),c=m(()=>{const u={};if(t.size!==void 0&&(u[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const x=t.spaced===!0?`${q.md}px`:t.spaced in q?`${q[t.spaced]}px`:t.spaced,f=t.vertical===!0?["Left","Right"]:["Top","Bottom"];u[`margin${f[0]}`]=u[`margin${f[1]}`]=x}return u});return()=>j("hr",{class:e.value,style:c.value,"aria-orientation":l.value})}});function V(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const o=parseInt(t,10);return isNaN(o)?0:o}const ct=A({name:"close-popup",beforeMount(t,{value:o}){const s={depth:V(o),handler(l){s.depth!==0&&setTimeout(()=>{const i=O(t);i!==void 0&&Q(i,l,s.depth)})},handlerKey(l){I(l,13)===!0&&s.handler(l)}};t.__qclosepopup=s,t.addEventListener("click",s.handler),t.addEventListener("keyup",s.handlerKey)},updated(t,{value:o,oldValue:s}){o!==s&&(t.__qclosepopup.depth=V(o))},beforeUnmount(t){const o=t.__qclosepopup;t.removeEventListener("click",o.handler),t.removeEventListener("keyup",o.handlerKey),delete t.__qclosepopup}}),ut={class:"post-card"},dt={class:"q-pa-sm flex items-center justify-between no-wrap",color:"primary"},mt={class:"text-blue"},pt={class:"text q-pa-sm flex justify-between no-wrap"},_t=["src"],ft=H({__name:"PostCard",props:{post:{}},setup(t){const{loggedUser:o}=R(),{$event:s}=h();Y(()=>t.post.published,async r=>h().$PATCH(`/posts/${t.post.id}`,{published:t.post.published}));const l=async r=>{await h().$DELETE(`/posts/${t.post.id}`),s("posts-load")},i=m(()=>o?.is_admin||o?.id===t.post.user_id);return(r,e)=>{const c=G,u=et,x=ot,f=N,B=J,D=rt,E=nt,P=at,S=lt,T=st,z=Z,k=ct;return v(),g("div",ut,[n(z,{class:"q-ma-sm bg-grey-4",onClick:e[5]||(e[5]=p=>("navigateTo"in r?r.navigateTo:b(X))(`/posts/${t.post.id}`))},{default:d(()=>[a("div",dt,[b(i)?(v(),F(c,{key:0,size:"sm",icon:"mdi-pencil",to:`/posts/edit/${t.post.id}`,flat:""},null,8,["to"])):$("",!0),a("div",null,[a("span",mt,_(t.post.title),1),a("div",null,[a("small",null,[a("i",null,_(t.post.date),1)])]),n(u,{modelValue:t.post.rate,"onUpdate:modelValue":e[0]||(e[0]=p=>t.post.rate=p),disable:"",max:"5",icon:"mdi-star-outline",color:"red","icon-selected":"mdi-star","icon-half":"mdi-star-half-full"},null,8,["modelValue"])]),n(x),n(B,null,{default:d(()=>[n(f,{user:t.post.user},null,8,["user"])]),_:1})]),n(D,{inset:""}),a("div",pt,[a("span",null,_(t.post.short),1),a("div",null,[t.post.poster?(v(),g("img",{key:0,src:t.post.poster},null,8,_t)):$("",!0)])]),b(i)?(v(),g("div",{key:0,class:W(["flex justify-between",t.post.published?"":"bg-red-4"])},[n(E,{modelValue:t.post.published,"onUpdate:modelValue":e[1]||(e[1]=p=>t.post.published=p),label:"Show for all"},null,8,["modelValue"]),n(c,{icon:"mdi-delete",flat:"",onClick:e[4]||(e[4]=y(()=>{},["stop"])),color:t.post.published?"red":""},{default:d(()=>[n(P,null,{default:d(()=>[C('Удалить "'+_(t.post.title)+'"',1)]),_:1}),n(T,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[n(S,null,{default:d(()=>[C('Удалить "'+_(t.post.title)+'"?',1),e[6]||(e[6]=a("br",null,null,-1)),w(n(c,{onClick:e[2]||(e[2]=y(p=>l(t.post.id),["stop"])),label:"OK",color:"negative"},null,512),[[k]]),w(n(c,{onClick:e[3]||(e[3]=y(()=>{},["stop"])),label:"Отмена"},null,512),[[k]])]),_:1})]),_:1})]),_:1},8,["color"])],2)):$("",!0)]),_:1})])}}}),yt=Object.assign(tt(ft,[["__scopeId","data-v-0065981c"]]),{__name:"PostCard"});export{yt as _};
