import{a as N,h as j,Q as y}from"./QInput-DEWW7FXG.js";import{r as C,c as o,h as v,ad as D,g as U,ae as K,ay as p,V as L,y as M,C as $,m as W,a4 as Y,d as Z,ac as G,az as H,W as J,o as X,a9 as S,Y as ee,Z as te,_,f as b,ab as ae,a5 as le,$ as oe,a0 as ne}from"./index-BnrZpbN0.js";import{u as ue,a as re}from"./use-dark-vWacLrWd.js";import{Q as se}from"./QForm-CjSNPOcV.js";import{u as ie}from"./use-quasar-_Sq_U_aw.js";import"./focus-manager-DhdJisJs.js";function ce(a,d){const e=C(null),r=o(()=>a.disable===!0?null:v("span",{ref:e,class:"no-outline",tabindex:-1}));function c(u){const l=d.value;u?.qAvoidFocus!==!0&&(u?.type.indexOf("key")===0?document.activeElement!==l&&l?.contains(document.activeElement)===!0&&l.focus():e.value!==null&&(u===void 0||l?.contains(u.target)===!0)&&e.value.focus())}return{refocusTargetEl:r,refocusTarget:c}}const de={xs:30,sm:35,md:40,lg:50,xl:60},fe={...ue,...D,...N,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:a=>a==="tf"||a==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},ve=["update:modelValue"];function me(a,d){const{props:e,slots:r,emit:c,proxy:u}=U(),{$q:l}=u,V=re(e,l),m=C(null),{refocusTargetEl:n,refocusTarget:s}=ce(e,m),w=K(e,de),g=o(()=>e.val!==void 0&&Array.isArray(e.modelValue)),k=o(()=>{const t=p(e.val);return g.value===!0?e.modelValue.findIndex(f=>p(f)===t):-1}),i=o(()=>g.value===!0?k.value!==-1:p(e.modelValue)===p(e.trueValue)),h=o(()=>g.value===!0?k.value===-1:p(e.modelValue)===p(e.falseValue)),I=o(()=>i.value===!1&&h.value===!1),B=o(()=>e.disable===!0?-1:e.tabindex||0),Q=o(()=>`q-${a} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(V.value===!0?` q-${a}--dark`:"")+(e.dense===!0?` q-${a}--dense`:"")+(e.leftLabel===!0?" reverse":"")),T=o(()=>{const t=i.value===!0?"truthy":h.value===!0?"falsy":"indet",f=e.color!==void 0&&(e.keepColor===!0||i.value===!0)?` text-${e.color}`:"";return`q-${a}__inner relative-position non-selectable q-${a}__inner--${t}${f}`}),P=o(()=>{const t={type:"checkbox"};return e.name!==void 0&&Object.assign(t,{".checked":i.value,"^checked":i.value===!0?"checked":void 0,name:e.name,value:g.value===!0?e.val:e.trueValue}),t}),A=j(P),O=o(()=>{const t={tabindex:B.value,role:"switch","aria-label":e.label,"aria-checked":I.value===!0?"mixed":i.value===!0?"true":"false"};return e.disable===!0&&(t["aria-disabled"]="true"),t});function x(t){t!==void 0&&($(t),s(t)),e.disable!==!0&&c("update:modelValue",E(),t)}function E(){if(g.value===!0){if(i.value===!0){const t=e.modelValue.slice();return t.splice(k.value,1),t}return e.modelValue.concat([e.val])}if(i.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(h.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function F(t){(t.keyCode===13||t.keyCode===32)&&$(t)}function R(t){(t.keyCode===13||t.keyCode===32)&&x(t)}const z=d(i,I);return Object.assign(u,{toggle:x}),()=>{const t=z();e.disable!==!0&&A(t,"unshift",` q-${a}__native absolute q-ma-none q-pa-none`);const f=[v("div",{class:T.value,style:w.value,"aria-hidden":"true"},t)];n.value!==null&&f.push(n.value);const q=e.label!==void 0?L(r.default,[e.label]):M(r.default);return q!==void 0&&f.push(v("div",{class:`q-${a}__label q-anchor--skip`},q)),v("div",{ref:m,class:Q.value,...O.value,onClick:x,onKeydown:F,onKeyup:R},f)}}const pe=W({name:"QToggle",props:{...fe,icon:String,iconColor:String},emits:ve,setup(a){function d(e,r){const c=o(()=>(e.value===!0?a.checkedIcon:r.value===!0?a.indeterminateIcon:a.uncheckedIcon)||a.icon),u=o(()=>e.value===!0?a.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},c.value!==void 0?[v(Y,{name:c.value,color:u.value})]:void 0)]}return me("toggle",d)}}),ye=Z({__name:"PostEdit",setup(a){const d=G(),e=H(),r=o(()=>!e.params.id),c=J(),u=ie(),l=C({});X(async()=>{if(!e.params.id)return;const m=await S.get(`/post/${e.params.id}`);l.value=m.data});async function V(){if(!c.user)return;console.log(r.value),(r.value?await S.post("/post/",l.value):await S.patch(`/post/${e.params.id}/`,l.value)).status<400&&(u.notify({message:"Success",color:"green"}),r.value&&await d.push("/post-edit/1"))}return(m,n)=>(te(),ee(se,{onSubmit:V},{default:_(()=>[b(y,{modelValue:l.value.title,"onUpdate:modelValue":n[0]||(n[0]=s=>l.value.title=s),label:"Title"},null,8,["modelValue"]),b(y,{modelValue:l.value.short,"onUpdate:modelValue":n[1]||(n[1]=s=>l.value.short=s),label:"Short",type:"textarea"},null,8,["modelValue"]),b(y,{modelValue:l.value.body,"onUpdate:modelValue":n[2]||(n[2]=s=>l.value.body=s),label:"Body",type:"textarea"},null,8,["modelValue"]),b(pe,{modelValue:l.value.published,"onUpdate:modelValue":n[3]||(n[3]=s=>l.value.published=s),label:"Published"},null,8,["modelValue"]),ae("div",null,le(l.value.created_at),1),b(oe,{type:"submit"},{default:_(()=>[...n[4]||(n[4]=[ne("Save",-1)])]),_:1})]),_:1}))}});export{ye as default};
