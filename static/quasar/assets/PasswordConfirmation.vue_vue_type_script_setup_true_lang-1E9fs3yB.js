import{m as E,r as C,ar as q,as as B,o as A,g as I,h as Q,y as j,ak as k,D as h,q as M,S as R,at as D,d as $,au as O,av as U,a7 as K,$ as N,f as F,F as T}from"./index-DjNY1Fup.js";import{a as _,Q as P}from"./QInput-Dho8F8tW.js";const J=E({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(a,{slots:d,emit:u}){const m=I(),t=C(null);let s=0;const l=[];function v(e){const i=typeof e=="boolean"?e:a.noErrorFocus!==!0,f=++s,x=(o,r)=>{u(`validation${o===!0?"Success":"Error"}`,r)},V=o=>{const r=o.validate();return typeof r.then=="function"?r.then(n=>({valid:n,comp:o}),n=>({valid:!1,comp:o,err:n})):Promise.resolve({valid:r,comp:o})};return(a.greedy===!0?Promise.all(l.map(V)).then(o=>o.filter(r=>r.valid!==!0)):l.reduce((o,r)=>o.then(()=>V(r).then(n=>{if(n.valid===!1)return Promise.reject(n)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return f===s&&x(!0),!0;if(f===s){const{comp:r,err:n}=o[0];if(n!==void 0&&console.error(n),x(!1,r),i===!0){const S=o.find(({comp:w})=>typeof w.focus=="function"&&k(w.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function p(){s++,l.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function b(e){e!==void 0&&h(e);const i=s+1;v().then(f=>{i===s&&f===!0&&(a.onSubmit!==void 0?u("submit",e):e?.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function g(e){e!==void 0&&h(e),u("reset"),M(()=>{p(),a.autofocus===!0&&a.noResetFocus!==!0&&c()})}function c(){_(()=>{if(t.value===null)return;(t.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(t.value.querySelectorAll("[tabindex]"),i=>i.tabIndex!==-1))?.focus({preventScroll:!0})})}R(D,{bindComponent(e){l.push(e)},unbindComponent(e){const i=l.indexOf(e);i!==-1&&l.splice(i,1)}});let y=!1;return q(()=>{y=!0}),B(()=>{y===!0&&a.autofocus===!0&&c()}),A(()=>{a.autofocus===!0&&c()}),Object.assign(m.proxy,{validate:v,resetValidation:p,submit:b,reset:g,focus:c,getValidationComponents:()=>l}),()=>Q("form",{class:"q-form",ref:t,onSubmit:b,onReset:g},j(d.default))}}),L=$({__name:"PasswordConfirmation",props:O({errors:{default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){C({});const d=a,u=U(a,"modelValue");return(m,t)=>(N(),K(T,null,[F(P,{modelValue:u.value.password,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value.password=s),label:"Password",error:!!d.errors.password,"error-message":d.errors.password?.join()},null,8,["modelValue","error","error-message"]),F(P,{modelValue:u.value.password2,"onUpdate:modelValue":t[1]||(t[1]=s=>u.value.password2=s),label:"Password confirm",error:!!d.errors.password2,"error-message":d.errors.password2?.join()},null,8,["modelValue","error","error-message"])],64))}});export{J as Q,L as _};
